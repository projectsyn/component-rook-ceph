= Alert rule: CephPGRepairTakingTooLong

== icon:glasses[] Overview

This alert fires when Ceph takes longer than one hour to repair a inconsistent placement group (PG).

See the https://docs.ceph.com/en/latest/rados/operations/pg-repair/#more-information-on-placement-group-repair[Ceph documentation] for some information about placement group repair.

== icon:bug[] Steps for debugging

=== List inconsistent PGs

[source,console]
----
$ ceph_cluster_ns=syn-rook-ceph-cluster
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- \
      rados list-inconsistent-pg <POOLNAME> <1>
----
<1> Specify name of Ceph pool which has inconsistent PGs

=== Trigger repair for inconsistent PG

[source,console]
----
$ ceph_cluster_ns=syn-rook-ceph-cluster
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- \
      ceph pg repair <PGID> <1>
----
<1> `<PGID>` is the ID of the inconsistent PG, for example `1.4`
